ShapeReducer-obcj
==

Path optimization using the [Douglas-Peucker Line Approximation Algorithm](http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker%5Falgorithm) in Objective C. Modified for ease of use with MapKit.

Example results:

- [103 points at no reduction](http://i.imgur.com/wNSf7m7.png)
- [21 points at 0.0001 tolerance reduction](http://i.imgur.com/NUc81OA.png)
- [7 points at 0.001 tolerance reduction](http://i.imgur.com/1P7sVoz.png)

Usage
--

Create a shape with too many points:

```objective-c
Shape *shape = [[Shape alloc] init];
double pointLatitudes[103] = {27.954427, 27.9554, 27.954755, 27.954526, 27.954425, 27.954243, 27.95374, 27.953032, 27.952707, 27.952422, 27.95214, 27.951861, 27.951119, 27.950416, 27.950359, 27.949604, 27.948869, 27.948471, 27.9481, 27.947389, 27.947336, 27.94726, 27.946621, 27.945891, 27.945162, 27.945162, 27.94545, 27.944743, 27.943945, 27.9437, 27.943443, 27.943364, 27.943321, 27.943262, 27.942496, 27.940231, 27.939565, 27.939376, 27.939376, 27.93793, 27.937495, 27.937097, 27.937185, 27.937457, 27.93751, 27.937861, 27.937971, 27.93802, 27.938019, 27.938018, 27.938053, 27.938192, 27.938498, 27.938975, 27.939096, 27.939154, 27.939154, 27.939372, 27.939391, 27.939401, 27.939374, 27.939097, 27.938927, 27.938715, 27.937457, 27.937457, 27.937185, 27.937097, 27.937495, 27.93793, 27.939376, 27.939376, 27.939565, 27.940231, 27.942496, 27.943262, 27.943321, 27.943364, 27.943443, 27.9437, 27.943945, 27.944743, 27.94545, 27.94545, 27.945748, 27.946221, 27.946486, 27.947211, 27.947872, 27.947942, 27.948017, 27.948698, 27.949459, 27.950189, 27.950944, 27.951006, 27.951134, 27.951741, 27.951992, 27.952707, 27.953454, 27.953907, 27.954192};
double pointLongtitudes[103] = {-82.45874999999999, -82.45878, -82.458016, -82.458009, -82.457984, -82.45793999999999, -82.457673, -82.45735999999999, -82.458214, -82.45903, -82.459892, -82.46073699999999, -82.46040000000001, -82.460115, -82.460092, -82.459766, -82.45942100000001, -82.45923500000001, -82.45908, -82.45878399999999, -82.458761, -82.458727, -82.458422, -82.458106, -82.457778, -82.457778, -82.45694899999999, -82.456642, -82.456295, -82.45618899999999, -82.45607699999999, -82.456046, -82.456019, -82.45599799999999, -82.455665, -82.454668, -82.454373, -82.454294, -82.454294, -82.453694, -82.453502, -82.453312, -82.453063, -82.45219899999999, -82.45203100000001, -82.45104499999999, -82.45069599999999, -82.45032399999999, -82.450152, -82.450031, -82.450029, -82.45001999999999, -82.449952, -82.44982, -82.449775, -82.449911, -82.449911, -82.45055499999999, -82.450727, -82.450824, -82.451004, -82.45150700000001, -82.45170899999999, -82.452185, -82.45219899999999, -82.45219899999999, -82.453063, -82.453312, -82.453502, -82.453694, -82.454294, -82.454294, -82.454373, -82.454668, -82.455665, -82.45599799999999, -82.456019, -82.456046, -82.45607699999999, -82.45618899999999, -82.456295, -82.456642, -82.45694899999999, -82.45694899999999, -82.456091, -82.456293, -82.456416, -82.45675300000001, -82.45706, -82.457089, -82.457127, -82.457435, -82.45773699999999, -82.458052, -82.45836300000001, -82.45839100000001, -82.458448, -82.458674, -82.457902, -82.458214, -82.458533, -82.458721, -82.458743};
unsigned int pointSequence[103] = {1, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130};
for (int i = 0; i < 103; i++) {
    ShapePoint *point = [[ShapePoint alloc] initWithLatitude:pointLatitudes [i]
                                                   longitude:pointLongtitudes[i]
                                                    sequence:pointSequence[i]];
    [shape addPoint:point];
}
```

Reduce the shape:

```objective-c
ShapeReducer *reducer = [[ShapeReducer alloc] init];
shape = [reducer reduce:shape tolerance:0.0001];
```

Display the shape in a class that implements `<MKMapViewDelegate>`:

```objective-c
MKPolyline *line = [MKPolyline polylineWithCoordinates:shape.coordinates count:shape.points.count];
[self.mapView addOverlay:line];
self.mapView.region = shape.region;
```

Credit
--

Written by Tomislav Filipčić <tomislav@me.com>. Ported from PHP port by Quentin Zervaas <http://www.phpriot.com/articles/reducing-map-path-douglas-peucker-algorithm>
